import{p as h,E as n}from"./theme.DK6hc27w.js";import{d as y,p as b,q as k,C as c,b as u,o,w as d,c as x,G as V,k as w,_ as R}from"./framework.B3sS8SrE.js";const U=["src"],j=y({__name:"index",props:{formValue:{type:Object},modelValue:{type:String,default:""},prop:{type:String}},emits:["update:modelValue"],setup(p,{emit:i}){const t=b(""),r=p;k(()=>r.modelValue,()=>{t.value=r.modelValue});const f=i,m=a=>{let e=new FileReader;return e.readAsDataURL(a),new Promise(s=>{e.onload=function(l){let g=this.result;s(g)}})},_=(a,e)=>{t.value=URL.createObjectURL(e.raw)},v=async a=>{if(["image/jpeg","image/jpg","image/png"].includes(a.type)){if(a.size/1024/1024>2)return n.error("Avatar picture size can not exceed 2MB!"),!1}else return n.error("请传图片"),!1;const e=await m(a);return t.value=e,f("update:modelValue",e),!0};return(a,e)=>{const s=c("el-icon"),l=c("el-upload");return o(),u(l,{class:"avatar-uploader",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","show-file-list":!1,"on-success":_,"before-upload":v},{default:d(()=>[t.value?(o(),x("img",{key:0,src:t.value,class:"avatar"},null,8,U)):(o(),u(s,{key:1,class:"avatar-uploader-icon"},{default:d(()=>[V(w(h))]),_:1}))]),_:1})}}}),C=R(j,[["__scopeId","data-v-f480845a"]]);export{C as default};
